<head>
<title>Header</title>
<link rel="stylesheet" type = "text/css" href="CSS/menu.css">
<link rel="stylesheet" type="text/css" href="CSS/Base.css">
</head>

<script>
    const timer = ms => new Promise(res => setTimeout(res, ms));
    const equals = (a, b) => JSON.stringify(a) === JSON.stringify(b);

    async function changeText(id, text) {
        var display = [];

        var time = 3000/text.length

        if (time > 500) {
            time = 500;
        }

        for (let i = 0; i < text.length; i++) {
            current = document.getElementById(id).innerHTML; 
            
            if(equals(current.split(""), display) || display.length == 0) {
                display.push(text[i]);
                document.getElementById(id).innerHTML = display.toString().replaceAll(",","");
            }
            else{
                break;
            }
            await timer(time);
        }
    }

    function changeBack(id, text) {
        document.getElementById(id).innerHTML = text;
    }
</script>

<div class=navbar>
    <div class="controlpanel" align="left">
        <input type="checkbox" name="theme" id="switch" /><label for="switch"></label>
    </div>

    <div class="topnav" align="center">
        <a href="index.html" id='Home' onmouseover="changeText('Home', 'Home')" onmouseout="changeBack('Home', '&#127968;')">&#127968;</a>
        <a href="Projects.html" id='Projects' onmouseover="changeText('Projects', 'Projects')" onmouseout="changeBack('Projects', '&#128187;')">&#128187;</a>
        <a href="Experience.html" id='Experience' onmouseover="changeText('Experience', 'Experience')" onmouseout="changeBack('Experience', '&#128188;')">&#128188;</a>
        <a href="Education.html" id='Education' onmouseover="changeText('Education', 'Education')" onmouseout="changeBack('Education', '&#128218;')">&#128218;</a>
        <a href="Contact.html" id='Contact' onmouseover="changeText('Contact', 'Contact')" onmouseout="changeBack('Contact', '&#128221;')">&#128221;</a>
    </div>
</div>

<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
    $(function () {
        $('a').each(function () {
            var currentpath = window.location.href;
            var pathArray = currentpath.split('/');
            if (pathArray[pathArray.length - 1] == "") {
                currentpath += "index.html";
            }

            if ($(this).prop('href') == currentpath) {
                $(this).addClass('active'); $(this).parents('li').addClass('active');
                return;
            }
        });
    });
</script>

<script>
    if (localStorage.getItem("theme") == "false") {
        document.documentElement.setAttribute("data-theme", "light");
        var check = document.getElementById("switch");
    }
    else {
        document.documentElement.setAttribute("data-theme", "dark");
        var check = document.getElementById("switch");
        check.setAttribute("checked", "checked");
    }
</script>

<script>
    var checkbox = document.querySelector("input[name=theme]");

    checkbox.addEventListener("change", function () {
        localStorage.setItem("theme", this.checked);
        trans()
        if (this.checked) {
            document.documentElement.setAttribute("data-theme", "dark");
        } else {
            document.documentElement.setAttribute("data-theme", "light");
        }
    });

    let trans = () => {
        document.documentElement.classList.add("transition");
        window.setTimeout(() => {
            document.documentElement.classList.remove("transition");
        }, 1000)
    };
</script>
